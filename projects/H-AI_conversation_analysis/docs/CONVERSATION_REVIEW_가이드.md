# Conversation Review + 고객 심리 입체 분석 가이드

## 1. 목적

단순 **오답률·건수**만 보면 “챗봇이 잘 대응하고 있다”로 보일 수 있습니다.  
이 모듈은 **Rasa Conversation Review** 개념과 **고객 심리/행동** 관점을 적용해, 같은 데이터를 더 입체적으로 해석하고 **숨은 리스크**를 드러내기 위한 것입니다.

- **Conversation Review**: 세션 단위로 대화를 보고, “어디서 막혔는지·왜 실패했는지” 패턴을 찾는 방식.
- **고객 심리**: 긴급/불안·혼란·좌절 등 질문 텍스트와 세션 플로우로 추론 가능한 지표.

## 2. 산출물 위치

- **JSON**: `analysis_report.json` → `대화_리뷰_분석`
- **HTML**: 보고서 **「4. 대화 리뷰 (Conversation Review + 고객 심리)」** 섹션
- **요약 텍스트**: `analysis_summary.txt` → `[5] 대화 리뷰` 블록

## 3. 포함 지표

### 3.1 고객 심리·행동 지표 (턴 단위)

| 지표 | 의미 |
|------|------|
| 오답 턴 중 긴급/불안 질문 비율 | “급해·취소·확인” 등 — 긴급한 고객이 오답을 받은 비중 |
| 오답 턴 중 혼란/모호 질문 비율 | “그거·위에·어떻게” 등 — 의도 불명확로 잘못 라우팅되기 쉬운 질문 |
| 오답 턴 중 부정 표현 비율 | 이미 불만이 있는 상태에서 오답을 경험한 턴 비중 |

### 3.2 세션 리뷰 지표 (세션ID 있을 때)

- **오답 1회 이상 세션 수** / **오답 2회 이상 세션 수**: 같은 대화 안에서 반복 오답 → 좌절·이탈 리스크.
- **첫 턴 부정 세션 수**: 세션 첫 질문부터 부정 표현 → 화풀이/선입견 가능성.
- **의도 전환 후 오답 세션 수**: 카테고리(의도)가 바뀐 뒤 오답 발생 → 라우팅·스코프 한계 후보.

### 3.3 태그 제안 (Rasa 스타일)

검토 대상 필터링·우선순위 정할 때 사용할 수 있는 태그 후보입니다.

| 태그 후보 | 의미 |
|-----------|------|
| high-frustration | 세션 내 오답 2회 이상 |
| first-turn-negative | 첫 턴부터 부정 표현 |
| intent-shift-with-wrong | 의도(카테고리) 전환 후 오답 발생 |
| fallback-pattern | 짧은 질문(10자 이하) + 오답 |

### 3.4 숨은 리스크 요약

“표면적으로는 괜찮아 보여도” 주의할 만한 패턴을 문장으로 요약합니다.

- **표면_오답률_낮음**: 전체 오답률이 낮아도, 세션 수·반복 오답 관점에서 리스크 존재 가능.
- **세션_내_반복_오답**: 같은 세션에서 오답 2회 이상 → 좌절·이탈 가능성.
- **의도_전환_후_오답**: 주제가 바뀌는 순간 오답 → 라우팅/스코프 이슈 후보.
- **첫_턴_부정**: 이미 불만을 가진 고객의 대화.
- **긴급_상황_오답**: 긴급/불안 키워드가 있는 턴에서 오답 비중이 높은 경우.

## 4. 데이터 요구사항

- **세션 단위 분석**: CSV에 **세션ID** 컬럼이 있어야 합니다. 없으면 고객 심리 지표(턴 단위)와 “세션 없음” 기준 숨은 리스크만 산출됩니다.
- 기존 컬럼: 질문, 답변, 카테고리, 분류, 평가결과, 오답사유, (답변순서, 날짜).

## 5. 참고

- Rasa Conversation Review: [Rasa Docs – Conversation Review](https://rasa.com/docs/studio/analyze/conversation-review)  
- 본 분석의 태그는 **규칙/휴리스틱** 기반이며, Rasa Studio처럼 수동 태깅·API 연동은 포함하지 않습니다. 필요 시 `대화_리뷰_분석` JSON을 활용해 별도 워크플로우를 구성할 수 있습니다.
